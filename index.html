<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>6ê°œì›” ì˜ì–´ í•™ìŠµ í”Œë˜ë„ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 20px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .header h1 {
      color: #4a5568;
      font-size: 2.5em;
      margin-bottom: 10px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .progress-overview {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .progress-card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      text-align: center;
      min-width: 150px;
    }

    .progress-card h3 {
      color: #4a5568;
      margin-bottom: 10px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e2e8f0;
      border-radius: 4px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transition: width 0.3s ease;
    }

    .stage-selector {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .stage-btn {
      padding: 15px 30px;
      border: none;
      border-radius: 25px;
      background: rgba(255, 255, 255, 0.8);
      color: #4a5568;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    .stage-btn.active {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .calendar {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .week {
      margin-bottom: 30px;
    }

    .week-header {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 15px;
      font-weight: bold;
      font-size: 18px;
    }

    .days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 15px;
    }

    .day {
      background: #f7fafc;
      border-radius: 15px;
      padding: 20px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .day:hover {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .day-header {
      text-align: center;
      margin-bottom: 15px;
      font-weight: bold;
      color: #4a5568;
    }

    .day-date {
      background: #667eea;
      color: white;
      padding: 8px;
      border-radius: 8px;
      display: inline-block;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .task {
      margin-bottom: 10px;
      padding: 10px;
      background: white;
      border-radius: 8px;
      border-left: 4px solid #e2e8f0;
      font-size: 14px;
    }

    .task.completed {
      border-left-color: #48bb78;
      background: #f0fff4;
    }

    .task-checkbox {
      margin-right: 8px;
      transform: scale(1.2);
    }

    .task-text {
      cursor: pointer;
    }

    .task.completed .task-text {
      text-decoration: line-through;
      color: #718096;
    }

    .weekend {
      background: #fff5f5;
      border-color: #feb2b2;
    }

    .stats {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin-top: 20px;
    }

    .stats h2 {
      text-align: center;
      color: #4a5568;
      margin-bottom: 20px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .stat-item {
      text-align: center;
      padding: 15px;
      background: #f7fafc;
      border-radius: 10px;
    }

    .stat-value {
      font-size: 2em;
      font-weight: bold;
      color: #667eea;
    }

    .reset-btn {
      background: #e53e3e;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px auto;
      display: block;
      font-size: 14px;
    }

    .reset-btn:hover {
      background: #c53030;
    }

    @media (max-width: 768px) {
      .days {
        grid-template-columns: 1fr;
      }

      .progress-overview {
        flex-direction: column;
        align-items: center;
      }

      .stage-selector {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“š 6ê°œì›” ì˜ì–´ í•™ìŠµ í”Œë˜ë„ˆ</h1>
      <p>2025.08.18 (ì›”) ~ 2026.02.1 (ì¼)</p>

      <div class="progress-overview">
        <div class="progress-card">
          <h3>ì „ì²´ ì§„í–‰ë¥ </h3>
          <div class="progress-bar">
            <div class="progress-fill" id="totalProgress"></div>
          </div>
          <span id="totalProgressText">0%</span>
        </div>
        <div class="progress-card">
          <h3>ì´ë²ˆ ì£¼ ì§„í–‰ë¥ </h3>
          <div class="progress-bar">
            <div class="progress-fill" id="weekProgress"></div>
          </div>
          <span id="weekProgressText">0%</span>
        </div>
        <div class="progress-card">
          <h3>ì—°ì† í•™ìŠµì¼</h3>
          <div style="font-size: 2em; color: #667eea; font-weight: bold;" id="streak">0ì¼</div>
        </div>
      </div>
    </div>

    <div class="stage-selector">
      <button class="stage-btn active" onclick="showStage(1)">ğŸ”° 1ë‹¨ê³„ (1~2ê°œì›”)</button>
      <button class="stage-btn" onclick="showStage(2)">ğŸ“ˆ 2ë‹¨ê³„ (3~4ê°œì›”)</button>
      <button class="stage-btn" onclick="showStage(3)">ğŸ¯ 3ë‹¨ê³„ (5~6ê°œì›”)</button>
    </div>

    <div id="stage1" class="calendar">
      <h2 style="text-align: center; margin-bottom: 20px; color: #4a5568;">ğŸ”° 1ë‹¨ê³„ - ê¸°ì´ˆ ë‹¤ì§€ê¸°</h2>
      <div id="stage1-weeks"></div>
    </div>

    <div id="stage2" class="calendar" style="display: none;">
      <h2 style="text-align: center; margin-bottom: 20px; color: #4a5568;">ğŸ“ˆ 2ë‹¨ê³„ - ë¬¸ì¥ ëŠ˜ë¦¬ê¸°</h2>
      <div id="stage2-weeks"></div>
    </div>

    <div id="stage3" class="calendar" style="display: none;">
      <h2 style="text-align: center; margin-bottom: 20px; color: #4a5568;">ğŸ¯ 3ë‹¨ê³„ - ë§í•˜ê¸° í™•ì¥</h2>
      <div id="stage3-weeks"></div>
    </div>

    <div class="stats">
      <h2>ğŸ“Š í•™ìŠµ í†µê³„</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" id="totalTasks">0</div>
          <div>ì´ ì™„ë£Œí•œ ê³¼ì œ</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="totalDays">0</div>
          <div>í•™ìŠµí•œ ë‚ ì§œ</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="currentStage">1</div>
          <div>í˜„ì¬ ë‹¨ê³„</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="completionRate">0%</div>
          <div>ì „ì²´ ì™„ì„±ë¥ </div>
        </div>
      </div>
      <button class="reset-btn" onclick="resetData()">ğŸ“ ë°ì´í„° ì´ˆê¸°í™”</button>
    </div>
  </div>

  <script>
    // í•™ìŠµ ê³„íš ë°ì´í„°
    const studyPlans = {
      1: {
        weeks: 8,
        tasks: {
          weekday: {
            'mon': [
              'ì´ˆë“± ì˜ë¬¸ë²• 3800ì œ Level 1 - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - 30ë¬¸ì¥ ì½ê¸° (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ (20ë¶„)'
            ],
            'wed': [
              'ì´ˆë“± ì˜ë¬¸ë²• 3800ì œ Level 1 - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - 30ë¬¸ì¥ ì½ê¸° (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ (20ë¶„)'
            ],
            'fri': [
              'ì´ˆë“± ì˜ë¬¸ë²• 3800ì œ Level 1 - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - 30ë¬¸ì¥ ì½ê¸° (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ (20ë¶„)'
            ],
            'tue': [
              'ë§¤ì¼ ì˜ì–´ ë£¨í‹´ ì“°ê¸°ë…¸íŠ¸ - 1íŒ¨í„´ (20ë¶„)',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - 30ë¬¸ì¥ ì½ê¸° (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ (20ë¶„)'
            ],
            'thu': [
              'ë§¤ì¼ ì˜ì–´ ë£¨í‹´ ì“°ê¸°ë…¸íŠ¸ - 1íŒ¨í„´ (20ë¶„)',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - 30ë¬¸ì¥ ì½ê¸° (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ (20ë¶„)'
            ]
          },
          weekend: [
            'ì „ ì£¼ ë¬¸ë²• ë³µìŠµ 4ìª½ (30ë¶„)',
            'ë‹¨ì–´ ëˆ„ì  ë³µìŠµ 30ë¶„',
            'ëŒ€í‘œë¬¸ì¥ ëˆ„ì  ì•”ì†¡ 30ë¶„',
            'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 30ì´ˆ 2ì¼ì¹˜ (30ë¶„)'
          ]
        }
      },
      2: {
        weeks: 8,
        tasks: {
          weekday: {
            'mon': [
              'Grammar Mentor Joy 1 or 2 - 25ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 5ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ (25ë¶„)'
            ],
            'wed': [
              'Grammar Mentor Joy 1 or 2 - 25ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 5ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ (25ë¶„)'
            ],
            'fri': [
              'Grammar Mentor Joy 1 or 2 - 25ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 5ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ (25ë¶„)'
            ],
            'tue': [
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 35ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ (25ë¶„)'
            ],
            'thu': [
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 35ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ (25ë¶„)'
            ]
          },
          weekend: [
            'Joy ë¬¸ë²• ë³µìŠµ (ì£¼ê°„ ì •ë¦¬) (30ë¶„)',
            'ë‹¨ì–´ í…ŒìŠ¤íŠ¸ (30ë¶„)',
            'ëŒ€í‘œë¬¸ì¥ ëˆ„ì  ì•”ì†¡ (30ë¶„)',
            'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 1ë¶„ 2ì¼ì¹˜ (30ë¶„)'
          ]
        }
      },
      3: {
        weeks: 8,
        tasks: {
          weekday: {
            'mon': [
              'Grammar Mentor Joy 2 (ë§ˆë¬´ë¦¬) - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 10ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 2ë¶„ (25ë¶„)'
            ],
            'wed': [
              'Grammar Mentor Joy 2 (ë§ˆë¬´ë¦¬) - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 10ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 2ë¶„ (25ë¶„)'
            ],
            'fri': [
              'Grammar Mentor Joy 2 (ë§ˆë¬´ë¦¬) - 20ë¶„',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (15ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 30ë¬¸ì¥ + ë³µìŠµ 10ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 2ë¶„ (25ë¶„)'
            ],
            'tue': [
              'ë¯¸ë“œ ì˜ì–´ ìƒí™©ë³„ ê³µì‹ 581 - 2~3ê°œ í‘œí˜„ í•™ìŠµ (25ë¶„)',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (20ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 35ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 3ë¶„ (25ë¶„)'
            ],
            'thu': [
              'ë¯¸ë“œ ì˜ì–´ ìƒí™©ë³„ ê³µì‹ 581 - 2~3ê°œ í‘œí˜„ í•™ìŠµ (25ë¶„)',
              'ìš°ì„ ìˆœìœ„ ì˜ë‹¨ì–´ - 4ìª½ (20ë¶„)',
              'ëŒ€í‘œë¬¸ì¥ 2500 - ì‹ ê·œ 35ë¬¸ì¥ (25ë¶„)',
              'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 3ë¶„ (25ë¶„)'
            ]
          },
          weekend: [
            'ë‹¨ì–´ ëˆ„ì  ë³µìŠµ (30ë¶„)',
            'ëŒ€í‘œë¬¸ì¥ ëˆ„ì  ë³µìŠµ (30ë¶„)',
            'ë¯¸ë“œ í‘œí˜„ ì •ë¦¬ (30ë¶„)',
            'ìŠ¤í”¼í‚¹ ë§¤íŠ¸ë¦­ìŠ¤ 2ë¶„Â·3ë¶„ ë²ˆê°ˆì•„ ì§„í–‰ (30ë¶„)'
          ]
        }
      }
    };

    // ì‹œì‘ ë‚ ì§œ: 2025ë…„ 1ì›” 1ì¼ (ìˆ˜ìš”ì¼)
    const startDate = new Date(2025, 7, 18);
    // ìš”ì¼ ë°°ì—´ì„ ì›”ìš”ì¼ë¶€í„° ì‹œì‘í•˜ë„ë¡ ë³€ê²½
    const dayNames = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
    // ìš”ì¼ í‚¤ ë°°ì—´ë„ ë³€ê²½
    const dayKeys = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];

    // ì €ì¥ëœ ë°ì´í„° ë¡œë“œ
    let completedTasks = JSON.parse(localStorage.getItem('englishStudyTasks') || '{}');
    let studyStreak = parseInt(localStorage.getItem('studyStreak') || '0');
    let lastStudyDate = localStorage.getItem('lastStudyDate');

    // ë°ì´í„° ì €ì¥
    function saveData() {
      localStorage.setItem('englishStudyTasks', JSON.stringify(completedTasks));
      localStorage.setItem('studyStreak', studyStreak.toString());
      localStorage.setItem('lastStudyDate', lastStudyDate);
    }

    // ë‚ ì§œë¥¼ í‚¤ë¡œ ë³€í™˜
    function dateToKey(date) {
      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
    }

    // ë‹¬ë ¥ ìƒì„±
    function generateCalendar(stage) {
      const container = document.getElementById(`stage${stage}-weeks`);
      container.innerHTML = '';

      const plan = studyPlans[stage];
      const stageStartWeek = stage === 1 ? 0 : stage === 2 ? 8 : 16;

      // ì‹œì‘ ìš”ì¼ì„ ì›”ìš”ì¼ë¡œ ë§ì¶”ê¸° ìœ„í•œ ë¡œì§
      const startDayIndex = (startDate.getDay() + 6) % 7; // JS getDay()ëŠ” ì¼ìš”ì¼=0, ì›”ìš”ì¼=1ì´ë¯€ë¡œ ì›”ìš”ì¼=0ìœ¼ë¡œ ë³€ê²½
      const daysInStage = plan.weeks * 7;

      for (let day = 0; day < daysInStage; day++) {
        // ë‚ ì§œë¥¼ ê³„ì‚°
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + (stageStartWeek * 7) + day);

        // ì£¼ì°¨ ë° ìš”ì¼ ì •ë³´ ê³„ì‚°
        const week = Math.floor(day / 7);
        const dayOfWeek = day % 7;

        // ìƒˆë¡œìš´ ì£¼ê°€ ì‹œì‘ë  ë•Œ div ìƒì„±
        if (dayOfWeek === 0) {
          const weekDiv = document.createElement('div');
          weekDiv.className = 'week';
          const weekHeader = document.createElement('div');
          weekHeader.className = 'week-header';
          weekHeader.textContent = `${stageStartWeek + week + 1}ì£¼ì°¨`;
          weekDiv.appendChild(weekHeader);
          const daysDiv = document.createElement('div');
          daysDiv.className = 'days';
          weekDiv.appendChild(daysDiv);
          container.appendChild(weekDiv);
        }

        const daysDiv = container.lastElementChild.querySelector('.days');

        const dayDiv = document.createElement('div');
        dayDiv.className = 'day';

        // ì£¼ë§(í† , ì¼) êµ¬ë¶„
        if (dayOfWeek === 5 || dayOfWeek === 6) {
          dayDiv.classList.add('weekend');
        }

        const dayHeader = document.createElement('div');
        dayHeader.className = 'day-header';
        dayHeader.innerHTML = `
            <div class="day-date">${currentDate.getMonth() + 1}/${currentDate.getDate()} (${dayNames[dayOfWeek]})</div>
        `;
        dayDiv.appendChild(dayHeader);

        // ê³¼ì œ ì¶”ê°€
        let tasks = [];
        const dayKey = dayKeys[dayOfWeek];

        if (dayOfWeek === 5 || dayOfWeek === 6) { // ì£¼ë§: í† ìš”ì¼, ì¼ìš”ì¼
          tasks = plan.tasks.weekend;
        } else if (plan.tasks.weekday[dayKey]) {
          tasks = plan.tasks.weekday[dayKey];
        }

        tasks.forEach((taskText, taskIndex) => {
          const taskDiv = document.createElement('div');
          taskDiv.className = 'task';

          const taskKey = `${dateToKey(currentDate)}-${taskIndex}`;
          const isCompleted = completedTasks[taskKey] || false;

          if (isCompleted) {
            taskDiv.classList.add('completed');
          }

          taskDiv.innerHTML = `
                <input type="checkbox" class="task-checkbox" ${isCompleted ? 'checked' : ''}
                            onchange="toggleTask('${taskKey}', this)">
                <span class="task-text">${taskText}</span>
            `;
          dayDiv.appendChild(taskDiv);
        });

        daysDiv.appendChild(dayDiv);
      }
    }

    // ê³¼ì œ ì™„ë£Œ í† ê¸€
    function toggleTask(taskKey, checkbox) {
      completedTasks[taskKey] = checkbox.checked;

      const taskDiv = checkbox.parentElement;
      if (checkbox.checked) {
        taskDiv.classList.add('completed');
      } else {
        taskDiv.classList.remove('completed');
      }

      updateProgress();
      updateStreak();
      saveData();
    }

    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    function updateProgress() {
      const totalTasks = Object.keys(getAllPossibleTasks()).length;
      const completedCount = Object.values(completedTasks).filter(Boolean).length;
      const totalProgress = Math.round((completedCount / totalTasks) * 100);

      document.getElementById('totalProgress').style.width = totalProgress + '%';
      document.getElementById('totalProgressText').textContent = totalProgress + '%';

      // ì´ë²ˆ ì£¼ ì§„í–‰ë¥  ê³„ì‚°
      const today = new Date();
      const currentDay = (today.getDay() + 6) % 7; // ì›”ìš”ì¼=0, í™”ìš”ì¼=1 ... ì¼ìš”ì¼=6
      const weekStart = new Date(today);
      weekStart.setDate(today.getDate() - currentDay);

      let weekTasks = 0;
      let weekCompleted = 0;

      for (let i = 0; i < 7; i++) {
        const checkDate = new Date(weekStart);
        checkDate.setDate(weekStart.getDate() + i);
        const dateKey = dateToKey(checkDate);

        Object.keys(getAllPossibleTasks()).forEach(key => {
          if (key.startsWith(dateKey)) {
            weekTasks++;
            if (completedTasks[key]) weekCompleted++;
          }
        });
      }

      const weekProgress = weekTasks > 0 ? Math.round((weekCompleted / weekTasks) * 100) : 0;
      document.getElementById('weekProgress').style.width = weekProgress + '%';
      document.getElementById('weekProgressText').textContent = weekProgress + '%';

      // í†µê³„ ì—…ë°ì´íŠ¸
      document.getElementById('totalTasks').textContent = completedCount;
      document.getElementById('completionRate').textContent = totalProgress + '%';

      const studiedDays = new Set();
      Object.keys(completedTasks).forEach(key => {
        if (completedTasks[key]) {
          studiedDays.add(key.split('-').slice(0, 3).join('-'));
        }
      });
      document.getElementById('totalDays').textContent = studiedDays.size;
    }

    // ì—°ì† í•™ìŠµì¼ ì—…ë°ì´íŠ¸
    function updateStreak() {
      const today = dateToKey(new Date());
      const hasTasksToday = Object.keys(completedTasks).some(key =>
        key.startsWith(today) && completedTasks[key]
      );

      if (hasTasksToday) {
        if (!lastStudyDate || lastStudyDate !== today) {
          const yesterday = new Date();
          yesterday.setDate(yesterday.getDate() - 1);
          const yesterdayKey = dateToKey(yesterday);

          if (lastStudyDate === yesterdayKey) {
            studyStreak++;
          } else if (lastStudyDate !== today) {
            studyStreak = 1;
          }

          lastStudyDate = today;
        }
      }

      document.getElementById('streak').textContent = studyStreak + 'ì¼';
    }

    // ëª¨ë“  ê°€ëŠ¥í•œ ê³¼ì œ í‚¤ ìƒì„±
    function getAllPossibleTasks() {
      const allTasks = {};

      Object.keys(studyPlans).forEach(stage => {
        const plan = studyPlans[stage];
        const stageStartWeek = stage === '1' ? 0 : stage === '2' ? 8 : 16;
        const daysInStage = plan.weeks * 7;

        for (let day = 0; day < daysInStage; day++) {
          const currentDate = new Date(startDate);
          currentDate.setDate(startDate.getDate() + (stageStartWeek * 7) + day);

          let tasks = [];
          const dayOfWeek = (currentDate.getDay() + 6) % 7; // ì›”ìš”ì¼=0, í™”ìš”ì¼=1 ... ì¼ìš”ì¼=6
          const dayKey = dayKeys[dayOfWeek];

          if (dayOfWeek === 5 || dayOfWeek === 6) {
            tasks = plan.tasks.weekend;
          } else if (plan.tasks.weekday[dayKey]) {
            tasks = plan.tasks.weekday[dayKey];
          }

          tasks.forEach((taskText, taskIndex) => {
            const taskKey = `${dateToKey(currentDate)}-${taskIndex}`;
            allTasks[taskKey] = taskText;
          });
        }
      });

      return allTasks;
    }

    // ë‹¨ê³„ í‘œì‹œ
    function showStage(stage) {
      // ëª¨ë“  ë‹¨ê³„ ìˆ¨ê¸°ê¸°
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`stage${i}`).style.display = 'none';
        document.querySelectorAll('.stage-btn')[i - 1].classList.remove('active');
      }

      // ì„ íƒí•œ ë‹¨ê³„ ë³´ì´ê¸°
      document.getElementById(`stage${stage}`).style.display = 'block';
      document.querySelectorAll('.stage-btn')[stage - 1].classList.add('active');
      document.getElementById('currentStage').textContent = stage;
    }

    // ë°ì´í„° ì´ˆê¸°í™”
    function resetData() {
      if (confirm('ì •ë§ë¡œ ëª¨ë“  í•™ìŠµ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        completedTasks = {};
        studyStreak = 0;
        lastStudyDate = null;
        localStorage.clear();
        location.reload();
      }
    }

    // ì´ˆê¸°í™”
    function init() {
      generateCalendar(1);
      generateCalendar(2);
      generateCalendar(3);
      updateProgress();
      updateStreak();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>

</html>


